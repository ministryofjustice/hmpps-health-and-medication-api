server:
  shutdown: immediate

management.endpoint:
  health.cache.time-to-live: 0
  info.cache.time-to-live: 0

api:
  hmpps-auth.base-url: http://localhost:8090/auth
  prison-api.base-url: http://localhost:8091
  prisoner-search.base-url: http://localhost:8092

spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/health-and-medication-data

  main:
    allow-bean-definition-overriding: true

  jpa:
    show-sql: true

  flyway:
    placeholders:
      dpr_user: dpr_user
      dpr_password: dpr_password

database:
  username: health-and-medication-data
  password: health-and-medication-data

hmpps:
  sar:
    tests:
      attachments-expected: true
      expected-flyway-schema-version: 19
      expected-jpa-entity-schema:
        path: /sar/entity-schema-snapshot.json
      expected-api-response:
        path: /sar/expected-api-response.json
      expected-render-result:
        path: /sar/expected-render-result.html

  sqs:
    enabled: true
    provider: localstack
    queues:
      hmppsdomaineventsqueue:
        queueName: ${random.uuid}
        dlqName: ${random.uuid}
        subscribeTopicId: hmppseventtopic
        subscribeFilter: >
          {
            "eventType": [
              "prisoner-offender-search.prisoner.received",
              "prisoner-offender-search.prisoner.released",
              "prison-offender-events.prisoner.merged",
              "prison-offender-events.prisoner.cell.move"
            ]
          }
    topics:
      hmppseventtopic:
        arn: arn:aws:sns:eu-west-2:000000000000:${random.uuid}
